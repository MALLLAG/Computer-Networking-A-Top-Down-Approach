# 7.4 셀룰러 네트워크: 4G와 5G

이 절에서는 셀룰러 인터넷 액세스가 어떻게 이루어지는지 살펴봅니다. 이전 절에서 802.11 와이파이 액세스 포인트(AP)를 통해 인터넷에 접근하는 방법을 살펴보았는데, AP는 작은 커버리지 영역을 가지며 한 사람의 호스트는 일반적으로 마주치는 모든 AP와 연결할 수 없습니다. 따라서 와이파이 액세스는 이동 중인 사용자에게는 대체로 불편한 방식입니다.

이와 대조적으로, 4G 셀룰러 네트워크 액세스는 빠르게 보편화되었습니다. 100만 명 이상의 미국 모바일 셀룰러 네트워크 가입자를 대상으로 한 최근 연구에 따르면, 사용자들이 99% 이상의 시간 동안 4G 신호를 찾을 수 있었으며, 다운로드 속도는 20Mbps 이상이었습니다. 한국의 3대 주요 이동통신사 사용자들은 4G 신호를 99.5% 시간 동안 찾을 수 있었습니다. 이러한 결과로 스트리밍 HD 비디오 시청이나 이동 중인 차량, 버스, 고속열차에서의 화상회의 참여가 이제는 일상적인 일이 되었습니다. 4G 인터넷 액세스의 유비쿼터스화는 인터넷 연결 공유 자전거 및 스쿠터 시스템, 스마트폰 애플리케이션, 모바일 결제(중국의 WeChat, WhatsApp 등), 인터넷 기반 메시징과 같은 새로운 레벨의 애플리케이션을 가능하게 했습니다.

**셀룰러(cellular)** 라는 용어는 셀룰러 네트워크가 커버하는 지역이 **셀(cell)** 이라고 불리는 여러 지리적 커버리지 영역으로 나뉜다는 사실을 반영합니다. 각 셀에는 무선 신호를 송신하고 모바일 장치로부터 신호를 수신하는 **기지국(base station)** 이 포함되어 있습니다. 셀 내에서 모바일 장치가 현재 위치해 있는 셀의 커버리지 영역은 여러 요소에 따라 달라지는데, 기지국의 송신 전력, 장치의 송신 전력, 셀 내의 방해 건물, 기지국 안테나의 높이와 유형 등이 이에 해당합니다.

이 절에서는 현재의 4G와 새롭게 등장하는 5G 셀룰러 네트워크의 개요를 제공합니다. 모바일 장치와 기지국 사이의 무선 첫 번째 홉, 이동통신사의 네트워크와 에지 및 코어 네트워크, 그리고 더 넓은 인터넷을 연결하는 유선 첫 번째 홉 사이의 연결에 대해 살펴볼 것입니다. 또한 IP 프로토콜을 사용하여 서로 통신하는 4G LTE 네트워크 요소를 통해 인터넷 포커스 학습의 많은 원칙을 다시 접하게 될 것입니다. 라우터 간 라우팅에 사용되는 BGP와 섹션 5.4에서 학습한 내용, 7장의 4G/5G 보안, 8.8절의 인증 및 접근 제어에 대한 기본 원칙들도 함께 살펴보겠습니다.

4G와 5G 네트워크에 대한 논의는 비교적 간략할 것입니다. 모바일 셀룰러 네트워킹은 폭과 깊이 모두 큰 영역으로, 이 주제에 대해 여러 훌륭한 강좌가 있습니다.

---

## 7.4.1 4G LTE 셀룰러 네트워크: 아키텍처와 요소

<img width="568" height="344" alt="Image" src="https://github.com/user-attachments/assets/0480a8c7-9e35-45e6-a7cb-2545b607bad7" />

2020년에 작동 중인 4G 네트워크는 **4G Long-Term Evolution** 표준, 또는 더 간단히 **4G LTE**라고 불립니다. 이 절에서는 4G LTE 네트워크의 주요 요소를 설명하겠습니다. 그림 7.17은 4G LTE 네트워크 아키텍처의 주요 요소를 보여줍니다. 네트워크는 크게 무선 액세스 네트워크(radio access network)의 셀룰러 네트워크 에지와 코어 네트워크로 나뉩니다. 모든 네트워크 요소는 4장에서 학습한 IP 프로토콜을 사용하여 서로 통신합니다. 이전의 2G와 3G 셀룰러 네트워크와 마찬가지로, 4G LTE도 다소 불투명한 약어와 요소 이름으로 가득 차 있습니다. 독자 친화적인 용어인 "기지국(base station)"을 이 책 전체에서 사용하겠습니다.

### 모바일 장치 (Mobile Device)

모바일 장치는 셀룰러 이동통신사의 네트워크에 연결되는 스마트폰, 태블릿, 노트북 또는 IoT 장치입니다. 여기에는 웹 브라우저, 소셜 네트워킹 앱, 영상 전화 앱, 모바일 결제 앱 등과 같은 애플리케이션이 포함되며, 훨씬 더 많은 것들을 포함합니다. 모바일 장치는 IP 주소(NAT을 통해 획득)가 있는 네트워크 에지 장치이거나 엔드 시스템입니다. 모바일 장치는 또한 **국제 모바일 가입자 식별번호(IMSI, International Mobile Subscriber Identity)** 라고 불리는 전역적으로 고유한 64비트 식별자를 가지고 있습니다. IMSI는 모바일 장치의 SIM(Subscriber Identity Module) 카드에 저장됩니다. IMSI는 어떤 면에서 MAC 주소와 유사합니다. SIM 카드는 또한 가입자가 암호화 키 정보에 액세스하고 접근할 수 있도록 하는 장치에 대한 정보를 저장합니다. 공식 4G LTE 용어로는 모바일 장치를 **사용자 장비(UE, User Equipment)** 라고 합니다. 또한 모바일 장치가 항상 이동하는 것은 아니라는 점에 유의해야 합니다. 예를 들어, 고정 온도 센서나 감시 카메라일 수도 있습니다.

### 기지국 (Base Station)

기지국은 무선 액세스 네트워크에서 셀룰러 네트워크의 "에지"에 위치하며, 무선 자원의 관리와 모바일 장치와의 커버리지 영역 내 통신을 담당합니다. 이런 의미에서 셀룰러 기지국 기능은 무선 LAN의 AP와 비슷하지만(동일하지는 않음) 무선 LAN에서는 찾아볼 수 없는 몇 가지 중요한 역할도 수행합니다. 특히, 기지국은 모바일 장치에서 게이트웨이로의 장치별 IP 터널을 생성하고 셀 간의 장치 이동성을 처리하기 위해 서로 상호작용합니다. 인접 기지국들은 또한 셀 간의 간섭을 최소화하기 위해 무선 스펙트럼을 관리하도록 서로 조정합니다. 공식 4G LTE 용어로는 기지국을 **eNode-B** 라고 하는데, 이는 다소 불투명하고 비서술적인 용어입니다.

참고로, LTE 용어가 다소 불투명하다고 느끼신다면 여러분만 그런 것이 아닙니다! "eNode-B"라는 이름은 이전 3G 용어에서 유래된 것으로, 네트워크 기능 포인트가 "노드"로, "B"는 이전의 "기지국(BS)" 1G 용어 또는 2G 용어의 "기지 송수신국(BTS, Base Transceiver Station)"에서 온 것입니다. 4G LTE는 3G에서의 "진화(evolution)"이므로 "e"가 4G LTE 용어에서 "Node-B" 앞에 붙습니다. 이러한 이름의 불투명함은 멈추지 않습니다! 5G 시스템에서 eNode-B 기능은 이제 "ng-eNB"라고 불리는데, 아마도 그 약어가 무엇을 의미하는지 짐작할 수 있을 것입니다!

### 홈 가입자 서버 (HSS, Home Subscriber Server)

<img width="568" height="272" alt="Image" src="https://github.com/user-attachments/assets/e60e7edb-65b1-4c8b-b147-6637ca6ee550" />

그림 7.18에서 보듯이 HSS는 제어 평면 요소입니다. HSS는 데이터베이스로서, HSS의 네트워크가 홈 네트워크인 모바일 장치에 대한 정보를 저장합니다. 장치 인증을 위해 아래에서 설명할 MME와 함께 사용됩니다.

### 서빙 게이트웨이(S-GW)와 패킷 데이터 네트워크 게이트웨이(P-GW)

그림 7.18에서 보듯이, 서빙 게이트웨이와 패킷 데이터 네트워크 게이트웨이는 이동통신사 네트워크의 라우터로서 이동통신사 네트워크 외부로의 포워딩을 조정하는 두 개의 라우터입니다(실제로는 종종 함께 배치됨). P-GW는 또한 모바일 장치에 NAT IP 주소를 제공하고, NAT 기능을 수행합니다. P-GW는 4G LTE 요소 중 인터넷과 데이터그램이 더 큰 인터넷에 들어가기 전에 마지막으로 만나는 것입니다. 외부 세계로 향하는 P-GW의 관점에서 보면, 이동통신사의 LTE 네트워크 내 모바일 노드의 이동성은 외부 세계 밖의 P-GW에서 숨겨집니다.

### 이동성 관리 엔티티 (MME, Mobility Management Entity)

MME는 제어 평면 요소로서, 장치 인증, 이동성 관리에서 중요한 역할을 합니다. 네트워크에 연결하려는 장치를 인증하고 데이터 경로와 P-GW 인터넷 게이트웨이 라우터를 설정하며, 모바일 장치의 현재 셀에 대한 정보를 유지합니다. 그러나 그림 7.18에서 보듯이, MME는 모바일 장치의 데이터그램이 송수신되는 포워딩 경로에 있지 않습니다.

MME의 주요 기능은 다음과 같습니다:

- **인증(Authentication)**: 네트워크와 모바일 장치가 서로를 상호 인증하는 것이 중요합니다. 네트워크는 연결 중인 장치가 실제로 주어진 IMSI와 연결된 장치인지 알아야 하고, 모바일 장치도 연결하려는 네트워크가 합법적인 셀룰러 이동통신 네트워크인지 알아야 합니다. 8장에서 인증을, 8.8절에서 4G 인증에 대해 다룹니다. 여기서는 MME가 모바일의 홈 네트워크에 있는 홈 가입자 서비스(HSS)와의 연결에서 중개자 역할을 한다는 점만 언급하겠습니다. 모바일의 홈 HSS는 인증을 위해 충분한 암호화 정보를 로컬 MME에 전송하여 홈 HSS가 인증을 수행하고 있음을 모바일 장치에 증명합니다. 두 번째 단계의 네트워크 연결이 완료되면, MME와 모바일 장치는 서로를 상호 인증하게 되고, IMSI는 MME가 이제 모바일 장치-P-GW 데이터 경로를 구성할 준비가 됩니다.

- **경로 설정(Path setup)**: 그림 7.18의 하단을 보면, 모바일 장치에서 이동통신사의 게이트웨이 라우터로의 데이터 경로는 기지국과 모바일 장치 사이의 무선 첫 번째 홉, 기지국과 서빙 게이트웨이 사이의 연결된 IP 터널, 그리고 서빙 게이트웨이와 P-GW 게이트웨이 사이로 구성됩니다. 터널은 MME의 제어하에 설정되며, 기지국의 터널 종단점이 변경되어야 하는 반면 터널과 관련된 다른 서비스 품질은 변경되지 않는 경우, 장치 이동성을 용이하게 합니다.

- **셀 위치 추적(Cell location tracking)**: 장치가 셀 사이를 이동할 때 기지국은 MME에 장치의 위치를 업데이트합니다. 모바일 장치가 슬립 모드에 있지만 여전히 셀 사이를 이동하는 경우, 기지국은 더 이상 장치의 위치를 추적할 수 없습니다. 이 경우 MME가 장치를 깨우기 위해 위치를 찾는 것은 **페이징(paging)** 이라는 프로세스를 통해 이루어집니다.

### LTE 요소와 WLAN(WiFi) 기능 비교

| LTE 요소 | 설명 | 유사한 WLAN 기능 |
|---------|------|-----------------|
| 모바일 장치 (UE: User Equipment) | 최종 사용자의 IP 지원 무선/모바일 장치 (예: 스마트폰, 태블릿, 노트북) | 호스트, 엔드 시스템 |
| 기지국 (eNode-B) | LTE 네트워크로의 무선 액세스 링크의 네트워크 측면 | 액세스 포인트(AP), LTE 기지국이 WLAN에서는 찾을 수 없는 많은 기능 수행 |
| 이동성 관리 엔티티 (MME) | 모바일 장치 서비스 조정자: 인증, 이동성 관리 | 액세스 포인트(AP), MME가 WLAN에서는 찾을 수 없는 많은 기능 수행 |
| 홈 가입자 서버 (HSS) | 모바일 장치의 홈 네트워크에 위치, 홈 및 방문 네트워크에서 인증, 접근 권한 제공 | WLAN에 해당 없음 |
| 서빙 게이트웨이 (S-GW), PDN 게이트웨이 (P-GW) | 이동통신사 네트워크의 라우터, 이동통신사 네트워크 외부로의 포워딩 조정 | 액세스 ISP 네트워크의 iBGP와 eBGP 라우터 |
| 무선 액세스 네트워크 | 모바일 장치와 기지국 사이의 무선 링크 | 802.11 모바일과 AP 사이의 무선 링크 |

---

## 7.4.2 LTE 프로토콜 스택

<img width="548" height="352" alt="Image" src="https://github.com/user-attachments/assets/badccd34-0e61-4e08-a69a-71183f5f1901" />

4G LTE 아키텍처는 전체 IP 아키텍처이므로, LTE 프로토콜 스택의 상위 계층 프로토콜인 IP, TCP, UDP 및 다양한 애플리케이션 계층 프로토콜에 대해서는 2장부터 5장까지의 학습에서 이미 잘 알고 있습니다. 따라서 여기서 집중할 새로운 LTE 프로토콜은 주로 링크 및 물리 계층과 이동성 관리에 있습니다.

그림 7.21은 LTE 모바일 노드, 기지국, 서빙 게이트웨이에서의 사용자 평면 프로토콜 스택을 보여줍니다. 7.6절에서 LTE 이동성 관리를 학습할 때와 8.8절에서 보안을 학습할 때 LTE의 제어 평면 프로토콜 중 일부를 다룰 것입니다. 그림 7.21에서 볼 수 있듯이, 새롭고 흥미로운 사용자 평면 프로토콜 활동의 대부분은 모바일 장치와 기지국 사이의 무선 라디오 링크에서 발생합니다.

LTE는 모바일 장치의 링크 계층을 세 개의 하위 계층으로 나눕니다:

### 패킷 데이터 컨버전스 (Packet Data Convergence)

이 최상위 하위 계층은 링크 계층 바로 아래 IP 아래에 위치합니다. **패킷 데이터 컨버전스 프로토콜(PDCP)** 은 무선 링크를 통해 전송되는 비트 수를 줄이기 위해 IP 헤더 압축을 수행하고, 모바일 장치가 네트워크에 처음 연결될 때 LTE 모바일 장치와 MME 사이의 시그널링 메시지를 통해 설정된 키를 사용하여 IP 데이터그램의 암호화/복호화를 수행합니다. 8.8.2절에서 LTE 보안의 측면을 다룰 것입니다.

### 무선 링크 제어 (Radio Link Control)

**무선 링크 제어(RLC) 프로토콜** 은 두 가지 중요한 기능을 수행합니다: (i) 기본 링크 계층 프레임에 맞지 않을 정도로 큰 IP 데이터그램을 송신 측에서 분할하고 수신 측에서 재조립하는 것, 그리고 (ii) ACK/NAK 기반 ARQ 프로토콜을 사용한 링크 계층의 신뢰성 있는 데이터 전송. 3.4.1절에서 ARQ 프로토콜의 기본 요소를 학습했습니다.

### 매체 접근 제어 (Medium Access Control, MAC)

MAC 계층은 전송 스케줄링, 즉 7.4.4절에서 설명하는 무선 전송 슬롯의 요청 및 사용을 수행합니다. MAC 하위 계층은 또한 순방향 오류 정정 기술로서 중복 비트 전송 사용을 포함한 추가적인 오류 검출/정정 기능도 수행합니다. 중복 양은 채널 조건에 맞게 조정될 수 있습니다.

그림 7.21은 또한 사용자 데이터 경로에서 터널 사용을 보여줍니다. 앞서 논의했듯이 이러한 터널은 MME 제어하에 설정되며, 모바일 장치가 처음 네트워크에 연결될 때 형성됩니다. 두 엔드포인트 사이의 각 터널은 고유한 터널 엔드포인트 식별자(TEID)를 가집니다. 기지국이 모바일 장치로부터 데이터그램을 수신하면, **GPRS 터널링 프로토콜(GTPv1-U)** 을 사용하여 TEID를 포함하여 캡슐화하고, UDP 세그먼트로 터널의 다른 끝에 있는 서빙 게이트웨이로 전송합니다. 수신 측에서 기지국은 터널된 UDP 데이터그램을 역캡슐화하고, 모바일 장치용 캡슐화된 IP 데이터그램을 추출하여 무선 홉을 통해 모바일 장치로 해당 IP 데이터그램을 전달합니다.

---

## 7.4.3 LTE 무선 액세스 네트워크

<img width="529" height="376" alt="Image" src="https://github.com/user-attachments/assets/8a3b7278-f378-4b00-81e8-88b3b887b475" />

LTE는 다운스트림 채널에서 주파수 분할 다중화와 시간 분할 다중화의 조합을 사용하는데, 이는 **직교 주파수 분할 다중화(OFDM, Orthogonal Frequency Division Multiplexing)** 라고 합니다. "직교"라는 용어는 다른 주파수 채널에서 전송되는 신호가 채널 주파수가 밀접하게 배치되어 있을 때조차도 서로 거의 간섭하지 않도록 생성된다는 사실에서 유래합니다. LTE에서 각 활성 모바일 장치는 하나 이상의 채널 주파수에서 하나 이상의 0.5ms 타임 슬롯이 할당됩니다. 그림 7.22는 4개의 주파수에 걸쳐 8개의 타임 슬롯 할당을 보여줍니다. 동일 주파수 또는 다른 주파수에서 더 많은 타임 슬롯이 할당됨으로써 모바일 장치는 점점 더 높은 전송 속도를 달성할 수 있습니다. 슬롯 (재)할당은 밀리초마다 한 번씩 자주 수행될 수 있습니다. 다른 변조 방식도 전송 속도를 변경하는 데 사용될 수 있습니다.

모바일 장치에 대한 특정 타임 슬롯 할당은 LTE 표준에서 의무화되지 않습니다. 대신, 주어진 주파수의 주어진 타임 슬롯에서 어떤 모바일 장치가 전송할 수 있는지에 대한 결정은 LTE 장비 공급업체 및/또는 네트워크 운영자가 제공하는 스케줄링 알고리즘에 의해 결정됩니다. 물리 계층 프로토콜을 송신자와 수신자 사이의 채널 조건에 맞추고 채널 조건에 따라 패킷이 전송될 수신자를 선택하는 기회주의적 스케줄링을 통해 기지국은 무선 매체를 최적으로 활용할 수 있습니다. 또한, 사용자 우선순위와 계약된 서비스 수준(예: 실버, 골드, 플래티넘)도 다운스트림 패킷 전송 스케줄링에 사용될 수 있습니다. 위에서 설명한 LTE 기능 외에도, LTE-Advanced는 모바일 장치에 집계된 채널을 할당하여 수백 Mbps의 다운스트림 대역폭을 허용합니다.

---

## 7.4.4 추가 LTE 기능: 네트워크 연결 및 전력 관리

여기서 4G LTE 학습을 마무리하면서 두 가지 추가적인 중요한 LTE 기능을 살펴보겠습니다: (i) 모바일 장치가 처음 네트워크에 연결되는 과정과 (ii) 전력 사용을 관리하기 위해 모바일 장치가 코어 네트워크 요소와 함께 사용하는 기술입니다.

### 네트워크 연결 (Network Attachment)

모바일 장치가 셀룰러 이동통신사의 네트워크에 연결하는 과정은 크게 세 단계로 나뉩니다:

1. **기지국에 연결**: 이 첫 번째 단계는 7.31절에서 학습한 802.11 연결 프로토콜과 목적은 유사하지만 실제로는 상당히 다릅니다. 셀룰러 이동통신사 네트워크에 연결하려는 모바일 장치는 인근 기지국을 알아내고 연결하기 위해 부트스트랩 프로세스를 시작합니다. 모바일 장치는 처음에 모든 주파수 대역에서 기지국이 주기적으로 브로드캐스트하는 주 동기화 신호를 검색합니다. 이 신호가 발견되면 모바일 장치는 해당 주파수에 머무르며 보조 동기화 신호를 찾습니다. 이 두 번째 단계에서 발견된 정보를 통해 장치는 채널 대역폭, 채널 구성, 해당 기지국의 셀룰러 이동통신사 정보와 같은 추가 정보를 얻을 수 있습니다. 이 정보를 통해 모바일 장치는 연결할 기지국을 선택할 수 있습니다(가급적 홈 네트워크에 연결, 가능하고 사용 가능한 경우). 이 모바일-기지국 채널은 기지국과의 나머지 네트워크 연결 과정에 사용됩니다.

2. **상호 인증**: 7.4.1절에서 MME에 대한 이전 설명에서 인증에 대해 먼저 기지국 연결이 네트워크가 연결 중인 장치가 실제로 주어진 IMSI와 연결된 장치인지, 그리고 모바일 장치가 연결하려는 네트워크가 합법적인 셀룰러 이동통신 네트워크인지를 알기 위해 서로를 상호 인증해야 한다고 언급했습니다. 8장에서 인증을, 8.8.2절에서 4G 인증에 대해 더 자세히 다룹니다. 여기서는 MME가 모바일의 홈 네트워크에 있는 HSS와 모바일 사이에서 중개자 역할을 한다는 점만 언급하겠습니다. 모바일의 홈 HSS는 모바일 장치가 해당 IMSI와 연결되어 있음을 알 수 있게 해주는 충분한 암호화 정보를 로컬 MME에 전송합니다. 이 두 번째 단계의 네트워크 연결이 완료되면, MME와 모바일 장치는 서로를 상호 인증하게 됩니다. 모바일 장치가 다른 셀룰러 이동통신사가 운영하는 방문 네트워크에서 로밍하는 경우, 해당 로밍 네트워크의 MME는 모바일 장치의 홈 네트워크에 있는 HSS에 연락해야 합니다.

3. **모바일 장치-P-GW 데이터 경로 구성**: MME는 P-GW 게이트웨이(모바일 장치에 NAT 주소도 제공), 서빙 게이트웨이, 그리고 기지국에 연락하여 그림 7.21에 표시된 두 터널을 설정합니다. 이 과정이 완료되면, 모바일 장치는 기지국을 통해 이 터널을 통해 송수신하는 IP 데이터그램을 전송하고 인터넷으로부터 수신할 수 있습니다!

### 전력 관리: 슬립 모드 (Power Management: Sleep Modes)

802.11 비콘 7.3.5절과 블루투스 7.3.6절에서의 이전 논의에서 무선 장치가 전송이나 수신하지 않을 때 절전을 위해 슬립 상태로 들어갈 수 있음을 상기하십시오. 이 불연속 수신 상태라고 하는 상태는 일반적으로 수백 밀리초의 비활성 후에 진입하며, 모바일 장치와 기지국은 모바일 장치가 깨어나 다운스트림 채널(기지국에서 모바일 장치로)을 능동적으로 모니터링할 주기적 타임인터벌(보통 수백 밀리초)을 미리 예약합니다. 슬립하는 동안 들어오는 패킷을 수신하기 위해 깨어나야 할 필요가 없을 때는 모바일 장치의 라디오가 슬립하게 됩니다.

불연속 수신 상태는 "라이트 슬립(light sleep)"으로 간주될 수 있으며, 두 번째 슬립 상태인 아이들 상태는 5~10초의 점점 더 긴 비활성 기간 후에 뒤따르는데, 이는 "딥 슬립(deep sleep)"으로 생각할 수 있습니다. 이 딥 슬립에서 모바일 장치의 라디오는 깨어나 채널을 훨씬 더 자주 모니터링합니다. 실제로 이 슬립은 너무 깊어서 모바일 장치가 이동통신사 네트워크의 새 셀로 이동하면 슬립하는 동안 이전에 연결된 기지국에 알릴 필요가 없습니다. 따라서 이 딥 슬립에서 주기적으로 깨어날 때, 모바일 장치는 들어오는 패킷을 수신하기 위해 (잠재적으로 새로운) 기지국과 연결을 재설정해야 합니다. 이러한 제어 평면 페이징 메시지는 기지국이 셀 내의 모든 모바일 장치에게 브로드캐스트하며, 어떤 모바일 장치가 완전히 깨어나 기지국에 새로운 데이터 평면 연결을 재설정해야 하는지 나타냅니다(그림 7.18 참조).

---

## 7.4.5 글로벌 셀룰러 네트워크: 네트워크들의 네트워크

<img width="565" height="492" alt="Image" src="https://github.com/user-attachments/assets/f55e8124-2d70-4aee-a7a6-9fa69a0ec7d3" />

4G 셀룰러 네트워크 아키텍처를 학습했으니, 이제 한 걸음 물러서서 글로벌 셀룰러 네트워크(인터넷과 같은 "네트워크들의 네트워크")가 어떻게 구성되어 있는지 살펴보겠습니다.

그림 7.23은 4G 기지국을 통해 **홈 네트워크** 에 연결된 사용자의 모바일 스마트폰을 보여줍니다. 사용자의 홈 모바일 네트워크는 셀룰러 이동통신사(예: 미국의 Verizon, AT&T, T-Mobile, Sprint, 또는 프랑스의 Orange, 한국의 SK 텔레콤)가 운영합니다. 사용자의 홈 네트워크는 차례로 다른 셀룰러 이동통신사의 네트워크와 글로벌 인터넷에 연결됩니다. 그림 7.23에 표시된 것처럼 홈 네트워크의 하나 이상의 게이트웨이 라우터를 통해 공용 인터넷을 통하거나 **IP 패킷 교환(IPX, IP Packet eXchange)** 네트워크를 통해 연결됩니다. IPX는 셀룰러 이동통신사를 상호 연결하기 위해 특별히 설계된 관리형 네트워크입니다. 네트워크들은 공용 인터넷을 통해 또는 그림 7.23에 표시된 것처럼 홈 네트워크의 게이트웨이 라우터를 통해 인터넷 교환 포인트(1.3절의 그림 1.15 참조)를 통해 피어링 ISP와 상호 연결합니다. 그림 7.23에서 볼 수 있듯이 글로벌 셀룰러 네트워크가 실제로 인터넷과 같은 "네트워크들의 네트워크"임을 알 수 있습니다.

7.6절에서 4G LTE의 이동성 관리를 다시 다루고 8.8절에서 4G 보안을 다룬 후, 이러한 주제에 필요한 기본 원칙을 개발하겠습니다. 이제 새롭게 등장하는 5G 네트워크를 간략히 살펴보겠습니다.

---

## 7.4.6 5G 셀룰러 네트워크

궁극적인 광역 데이터 서비스는 유비쿼터스 기가비트 연결 속도, 극도로 낮은 지연 시간, 그리고 사용자 수와 지원되는 장치에 대한 제한 없는 것이 될 것입니다. 그러한 서비스는 개인 증강 현실 및 가상 현실, 무선 연결을 통한 자율 주행 차량의 원격 제어, 무선 연결을 통한 공장의 로봇 제어, 주거 액세스 기술(예: DSL 및 케이블)의 무선 연결 교체, 고정 유선 인터넷 서비스(예: 가정의 주거용 모뎀)가 있는 사물을 포함한 새로운 애플리케이션에 대한 많은 문을 열어줄 것입니다.

5G가 2020년대에 출시될 것으로 예상되지만, 점진적으로 개선된 버전들이 궁극적인 광역 데이터 서비스의 목표를 달성하기 위한 큰 진전을 이룰 것으로 예상됩니다. 5G는 10배의 피크 비트레이트 증가, 10배의 지연 감소, 100배의 트래픽 용량 증가를 제공할 것으로 예측됩니다.

주로 5G는 표준에서 채택한 "5G NR(New Radio)"를 의미합니다. 5G NR은 3GPP에서 정의한 표준입니다. 다른 5G 기술 표준인 NR도 존재하지만, 예를 들어 Verizon의 독자 5G TF 네트워크는 28 GHz와 39 GHz 주파수에서 운영되며 고정 무선 인터넷 서비스용으로만 사용되고 스마트폰에는 사용되지 않습니다.

5G 표준은 주파수를 두 그룹으로 나눕니다: **FR1(450 MHz-6 GHz)** 과 **FR2(24 GHz-52 GHz)**. 대부분의 초기 배포는 고정 인터넷 주거 액세스용 FR2 공간에서 이루어지고 있지만 2020년 초기 배포 중 일부는 FR1 공간에서도 이루어지고 있습니다.

### 밀리미터파 주파수

FR2 주파수는 **밀리미터파 주파수(millimeter wave frequencies)** 라고도 합니다. 밀리미터파 주파수는 훨씬 빠른 데이터 속도를 가능하게 하지만, 두 가지 주요 단점이 있습니다:

- 밀리미터파 주파수는 기지국에서 수신기까지의 도달 거리가 훨씬 짧습니다. 이는 밀리미터파 기술이 농촌 지역에 적합하지 않고 도시 지역에서 더 밀집된 기지국 배포가 필요함을 의미합니다.
- 밀리미터파 통신은 대기 간섭에 매우 취약합니다. 근처의 나뭇잎과 비가 야외 사용에 문제를 일으킬 수 있습니다.

### 5G의 세 가지 공존 표준

5G는 하나의 통합된 표준이 아니라 세 가지 공존하는 표준으로 구성됩니다:

- **eMBB(Enhanced Mobile Broadband)**: 5G NR의 초기 배포는 eMBB에 집중되어 있으며, 4G LTE에 비해 더 높은 다운로드 및 업로드 속도와 지연 시간의 적당한 감소를 위해 증가된 대역폭을 제공합니다. eMBB는 모바일 증강 현실 및 가상 현실, 모바일 4K 해상도 및 360° 비디오 스트리밍과 같은 풍부한 미디어 애플리케이션을 가능하게 합니다.

- **URLLC(Ultra Reliable Low-Latency Communications)**: URLLC는 공장 자동화 및 자율 주행과 같이 지연에 매우 민감한 애플리케이션을 대상으로 합니다. URLLC는 1ms의 지연을 목표로 합니다. 이 글을 쓰는 시점에서 URLLC를 가능하게 하는 기술은 아직 표준화 중입니다.

- **mMTC(Massive Machine Type Communications)**: mMTC는 센싱, 계량 및 모니터링 애플리케이션을 위한 협대역 액세스 유형입니다. 5G 네트워크 설계의 한 가지 우선순위는 IoT 장치의 네트워크 연결에 대한 장벽을 낮추는 것입니다. 지연 시간을 낮추는 것 외에도, 5G 네트워크를 위한 새로운 기술은 IoT 장치 사용을 4G LTE보다 더 보편적으로 만들기 위해 전력 요구 사항 감소에 집중하고 있습니다.

### 밀리미터파 주파수와 용량

많은 5G 혁신은 24 GHz-52 GHz 대역의 밀리미터파 주파수에서 작업한 직접적인 결과가 될 것입니다. 예를 들어, 이러한 주파수는 4G 대비 100배의 용량 증가를 달성할 가능성을 제공합니다. 이를 이해하기 위해 용량은 세 가지 항의 곱으로 정의할 수 있습니다:

**용량 = 셀 밀도 × 가용 스펙트럼 × 스펙트럼 효율성**

여기서 셀 밀도는 셀/km² 단위이고, 가용 스펙트럼은 Hz 단위이며, 스펙트럼 효율성은 각 기지국이 사용자와 얼마나 효율적으로 통신할 수 있는지를 나타내는 척도로 bps/Hz/셀 단위입니다. 이 단위들을 곱하면 용량이 bps/km² 단위임을 알 수 있습니다. 이 세 가지 항 각각에 대해 5G의 값이 4G보다 클 것입니다:

- 밀리미터 주파수가 4G LTE 주파수보다 훨씬 짧은 범위를 가지기 때문에 더 많은 기지국이 필요하고, 이는 셀 밀도를 증가시킵니다.
- 5G FR2가 4G LTE(약 2 GHz까지)보다 훨씬 더 큰 주파수 대역(52 - 24 = 28 GHz)에서 운영되기 때문에 더 많은 가용 스펙트럼을 가집니다.
- 스펙트럼 효율성에 관해서는, 정보 이론에 따르면 스펙트럼 효율성을 두 배로 늘리려면 전력의 17배 증가가 필요합니다. 전력을 늘리는 대신, 5G는 802.11 네트워크 학습에서 접한 것과 동일한 기술인 **MIMO 기술** 을 사용하며, 각 기지국에 여러 안테나를 사용합니다. 모든 방향으로 신호를 브로드캐스트하는 대신 각 MIMO 안테나는 **빔포밍(beam forming)** 을 사용하여 신호를 사용자에게 직접 전달합니다. MIMO 기술은 기지국이 동일한 시간에 동일한 주파수 대역에서 10-20명의 사용자에게 전송할 수 있게 합니다.

용량 방정식의 세 가지 항을 모두 증가시킴으로써, 5G는 도시 지역에서 100배의 용량 증가를 제공할 것으로 예상됩니다. 마찬가지로 훨씬 더 넓은 주파수 대역으로 인해 5G는 1Gbps 이상의 피크 다운로드 속도를 제공할 것으로 예상됩니다.

밀리미터파 신호는 그러나 건물과 나무에 의해 쉽게 차단됩니다. **스몰 셀 스테이션(Small cell stations)** 은 기지국과 사용자 사이의 커버리지 간격을 채우는 데 필요합니다. 인구가 많은 지역에서 두 스몰 셀 사이의 거리는 10~100 미터까지 다양할 수 있습니다.

### 5G 코어 네트워크

**5G 코어 네트워크** 는 모든 5G 모바일 음성, 데이터 및 인터넷 연결을 관리하는 데이터 네트워크입니다. 5G 코어 네트워크는 인터넷 및 클라우드 기반 서비스와 더 잘 통합되도록 재설계되고 있으며, 네트워크 전체에 분산 서버와 캐시를 포함하여 지연 시간을 줄입니다. 4장과 5장에서 논의한 대로 네트워크 기능 가상화와 다양한 애플리케이션 및 서비스를 위한 네트워크 슬라이싱이 코어에서 관리됩니다.

새로운 5G 코어 사양은 모바일 네트워크가 다양한 성능으로 다양한 서비스를 지원하는 방식에 주요 변경을 도입합니다. 4G 코어 네트워크의 경우(그림 7.17과 7.18 참조)와 마찬가지로 5G 코어는 최종 장치에서 데이터 트래픽을 전달하고, 장치를 인증하고, 장치 이동성을 관리합니다. 5G 코어에는 또한 7.4.2절에서 만났던 모든 네트워크 요소가 포함됩니다 - 모바일 장치, 셀, 기지국, 그리고 이동성 관리 엔티티(이제 아래에서 논의하는 대로 두 개의 하위 요소로 나뉨), HSS, 서빙 및 PDN 게이트웨이.

4G와 5G 코어 네트워크가 유사한 기능을 수행하지만, 새로운 5G 코어 아키텍처에는 몇 가지 주요 차이점이 있습니다. 5G 코어는 완전한 제어 및 사용자 평면 분리를 위해 설계되었습니다(5장 참조). 5G 코어는 순수하게 가상화된 소프트웨어 기반 네트워크 기능으로 구성됩니다. 이 새로운 아키텍처는 다양한 5G 애플리케이션의 다양한 요구 사항을 충족할 수 있는 유연성을 운영자에게 제공합니다. 새로운 5G 코어 네트워크 기능 중 일부는 다음과 같습니다:

- **사용자 평면 기능(UPF, User-Plane Function)**: 제어 및 사용자 평면 분리(5장 참조)는 패킷 처리를 분산하고 네트워크 에지로 푸시할 수 있게 합니다.

- **접근 및 이동성 관리 기능(AMF, Access and Mobility Management Function)**: 5G 코어는 본질적으로 4G 이동성 관리 엔티티(MME)를 두 개의 기능적 요소인 AMF와 SMF로 분해합니다. AMF는 최종 사용자 장비로부터 모든 연결 및 세션 정보를 수신하지만 연결 및 이동성 관리 작업만 처리합니다.

- **세션 관리 기능(SMF, Session Management Function)**: 세션 관리는 세션 관리 기능(SMF)이 처리합니다. SMF는 분리된 데이터 평면과 상호 작용을 담당합니다. SMF는 또한 IP 주소 관리를 수행하고 DHCP의 역할을 수행합니다.

이 글을 쓰는 시점(2020년)에서 5G는 초기 배포 단계에 있으며, 많은 5G 표준이 아직 확정되지 않았습니다. 5G가 보편적인 광대역 무선 서비스가 될지, 실내 무선 서비스에서 WiFi와 성공적으로 경쟁할지, 공장 자동화와 자율 주행 차량 인프라의 핵심 구성 요소가 될지, 그리고 궁극적인 광역 무선 서비스를 향한 큰 진전이 될지는 오직 시간만이 알려줄 것입니다.

---

## 사례 연구: 2G에서 3G, 4G로의 아키텍처 진화

비교적 짧은 20년의 기간 동안, 셀룰러 이동통신 네트워크는 거의 전적으로 회선 교환 전화 네트워크에서 음성을 단지 하나의 애플리케이션으로 포함하는 전체 IP 패킷 교환 데이터 네트워크로 놀라운 전환을 겪었습니다. 아키텍처 관점에서 이 전환은 어떻게 일어났을까요? 이전의 전화 지향 네트워크가 "꺼지고" 전체 IP 셀룰러 네트워크가 "켜지는" "플래그 데이(flag day)"가 있었을까요? 아니면 4.3.5절에서 본 IPv4에서 IPv6로의 전환처럼 이전의 전화 지향 네트워크의 요소들이 이중 회선(레거시)과 패킷(새로운) 기능을 가지기 시작했을까요?

그림 7.19는 이 교과서의 이전 7판에서 가져온 것으로, 2G와 3G 셀룰러 네트워크를 다루었습니다(이 역사적 자료는 8판에서 4G LTE에 대한 더 깊은 커버리지를 위해 이 책의 웹사이트에서 여전히 볼 수 있습니다). 2G 네트워크가 회선 교환 모바일 전화 네트워크임에도 불구하고, 그림 7.17과 7.19의 비교는 데이터 서비스가 아닌 음성 서비스를 위한 것이지만 유사한 개념적 구조를 보여줍니다 - 기지국이 제어하는 무선 에지, 이동통신사 네트워크에서 외부 세계로의 게이트웨이, 기지국과 게이트웨이 사이의 집선점.

그림 7.20(역시 이 교과서의 7판에서 가져옴)은 회선 교환 음성 서비스와 패킷 교환 데이터 서비스를 모두 지원하는 3G 셀룰러 아키텍처의 주요 아키텍처 구성 요소를 보여줍니다. 여기서 음성 전용 네트워크에서 결합된 음성 및 데이터 네트워크로의 전환은 명확합니다: 기존 코어 2G 셀룰러 음성 네트워크 요소는 그대로 유지되었습니다. 그러나 추가적인 셀룰러 데이터 기능이 *당시의* 기존 코어 음성 네트워크와 병렬로 그리고 독립적으로 기능하도록 추가되었습니다. 그림 7.20에서 보듯이 이 두 개의 별도 코어 음성 및 데이터 네트워크로의 분기점은 무선 액세스 네트워크의 기지국에서 네트워크 에지에서 발생했습니다. 대안인 기존 셀룰러 음성 네트워크의 코어 요소에 직접 새로운 데이터 서비스를 통합하는 것은 인터넷에서 새로운(IPv6) 및 레거시(IPv4) 기술을 통합할 때 발생하는 것과 동일한 문제를 야기했을 것입니다. 이동통신사들은 또한 기존 셀룰러 음성 네트워크에 대한 상당한 기존 인프라 투자(및 수익성 있는 서비스!)를 활용하고 이용하고자 했습니다.
