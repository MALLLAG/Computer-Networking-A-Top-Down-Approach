# 7.2 무선 링크와 네트워크의 특징

## 무선 링크가 유선 링크와 다른 점

무선 링크는 유선 링크와 여러 중요한 면에서 다르다. 이러한 차이점을 이해하는 것은 무선 네트워크 프로토콜을 설계하고 분석하는 데 필수적이다.

### 신호 세기 감소 (Path Loss)

전자기 복사는 물질을 통과할 때 감쇠한다. 예를 들어, 라디오 신호가 벽을 통과할 때 세기가 약해진다. 심지어 자유 공간에서도 신호는 분산되어 송신자와 수신자 사이의 거리가 증가할수록 신호 세기가 감소한다. 이를 **경로 손실(path loss)**이라고 부른다.

### 다른 소스로부터의 간섭

같은 주파수 대역에서 전송하는 무선 소스들은 서로 간섭한다. 대표적인 예로, 2.4 GHz 무선 전화기와 802.11b 무선 LAN이 같은 주파수 대역에서 전송한다. 따라서 2.4 GHz 무선 LAN 사용자가 통화 중인 경우, 네트워크와 전화 모두 성능이 저하될 수 있다. 전송 소스 외에도 환경 내의 전자기 잡음(예: 근처의 모터, 전자레인지)이 간섭을 일으킬 수 있다. 이러한 이유로 최근 802.11 표준들은 5GHz 주파수 대역에서 동작하도록 설계되었다.

### 다중 경로 전파 (Multipath Propagation)

전자기파의 일부가 물체와 지면에서 반사되어 송신자와 수신자 사이에 서로 다른 길이의 경로를 거쳐 도달하면 **다중 경로 전파**가 발생한다. 이로 인해 수신기에서 신호가 흐려지는 현상이 나타난다. 송신자와 수신자 사이에서 움직이는 물체는 시간에 따라 다중 경로 전파를 변화시킬 수 있다.

---

## 신호 대 잡음비와 비트 오류율

위의 논의에서 알 수 있듯이, 무선 링크에서는 유선 링크보다 비트 오류가 더 자주 발생한다. 이 때문에 무선 링크 프로토콜(예: 802.11)은 강력한 CRC 오류 검출 코드뿐만 아니라 손상된 프레임을 재전송하는 링크 수준의 신뢰성 있는 데이터 전송 프로토콜을 사용한다.

무선 채널의 손상을 고려한 후, 무선 신호를 수신하는 호스트에 주목해 보자. 이 호스트는 송신자가 전송한 원래 신호의 열화된 형태(감쇠와 다중 경로 전파로 인해 열화됨)와 환경의 배경 잡음이 결합된 전자기 신호를 수신한다.

**신호 대 잡음비(Signal-to-Noise Ratio, SNR)**는 수신된 신호의 세기와 잡음의 상대적인 측정값이다. SNR은 일반적으로 데시벨(dB) 단위로 측정되며, 이는 수신 신호 진폭과 잡음 진폭 비율의 밑이 10인 로그에 20을 곱한 값이다. 중요한 점은 SNR이 클수록 수신기가 배경 잡음에서 전송된 신호를 더 쉽게 추출할 수 있다는 것이다.

### SNR과 BER의 관계

비트 오류율(Bit Error Rate, BER)은 전송된 비트가 수신기에서 오류로 수신될 확률을 나타낸다. 다음 그래프는 이상적인 무선 채널에서 세 가지 다른 변조 기술(BPSK, QAM16, QAM256)에 대해 SNR 대비 BER을 보여준다.

<img width="482" height="381" alt="Image" src="https://github.com/user-attachments/assets/fbde6536-2c6b-446a-a031-57eb5f7a873f" />

이 그래프에서 몇 가지 중요한 물리 계층 특성을 알 수 있다.

**첫째, 주어진 변조 방식에서 SNR이 높을수록 BER이 낮아진다.** 송신자가 전송 전력을 높이면 SNR을 증가시킬 수 있으므로, 프레임이 오류로 수신될 확률을 줄일 수 있다. 하지만 일정 임계값 이상으로 전력을 높이는 것은 실질적인 이득이 거의 없다(예: BER을 10⁻¹²에서 10⁻¹³으로 줄이는 것). 또한 전송 전력을 높이면 배터리 구동 모바일 사용자에게 중요한 에너지 소비가 증가하고, 다른 송신자의 전송과 간섭할 가능성이 높아지는 단점이 있다.

**둘째, 주어진 SNR에서 전송률이 높은 변조 기술은 BER이 더 높다.** 예를 들어, SNR 10dB에서 BPSK 변조(1 Mbps 전송률)는 BER이 10⁻⁷ 미만인 반면, QAM16 변조(4 Mbps 전송률)는 BER이 10⁻¹로 실용적으로 사용하기에는 너무 높다. 그러나 SNR 20dB에서는 QAM16 변조가 4 Mbps 전송률과 10⁻⁷의 BER을 제공하며, BPSK 변조는 1 Mbps 전송률에 차트에서 벗어날 정도로 낮은 BER을 보인다. 만약 10⁻⁷의 BER을 허용할 수 있다면, QAM16이 제공하는 더 높은 전송률이 선호되는 변조 기술이 될 것이다.

**셋째, 물리 계층 변조 기술을 동적으로 선택하여 채널 조건에 적응할 수 있다.** SNR(따라서 BER)은 이동성이나 환경 변화로 인해 변할 수 있다. 적응형 변조 및 코딩은 802.11 WiFi와 4G, 5G 셀룰러 데이터 네트워크에서 사용된다. 이를 통해 주어진 채널 특성에 대해 BER 제약 조건을 만족하면서 가능한 가장 높은 전송률을 제공하는 변조 기술을 선택할 수 있다.

---

## 숨겨진 터미널 문제와 페이딩

유선 브로드캐스트 링크의 경우, 모든 노드가 다른 모든 노드의 전송을 수신할 수 있다. 그러나 무선 링크의 경우 상황은 그렇게 단순하지 않다.

### 숨겨진 터미널 문제 (Hidden Terminal Problem)

스테이션 A가 스테이션 B에 전송하고 있고, 동시에 스테이션 C도 스테이션 B에 전송하고 있다고 가정해 보자. **숨겨진 터미널 문제**에서는 환경의 물리적 장애물(예: 산, 건물)로 인해 A와 C가 서로의 전송을 들을 수 없을 수 있다. 그러나 A와 C의 전송이 실제로는 목적지 B에서 서로 간섭하고 있다.

```
        ┌─────┐
        │ 장애물 │
        └─────┘
    A ─────────────→ B ←───────────── C
   (A는 C를 감지 못함)    (C는 A를 감지 못함)
```

### 페이딩 (Fading)

수신기에서 감지할 수 없는 충돌을 초래하는 두 번째 시나리오는 신호 세기의 **페이딩**에서 비롯된다. A와 C가 서로의 신호를 감지할 만큼 강하지 않은 위치에 있지만, 그들의 신호가 스테이션 B에서 서로 간섭할 만큼은 강한 경우가 있을 수 있다.

<img width="296" height="262" alt="Image" src="https://github.com/user-attachments/assets/73686837-f550-49cb-8193-87774a300169" />

7.3절에서 살펴보겠지만, 숨겨진 터미널 문제와 페이딩은 무선 네트워크에서의 다중 접속을 유선 네트워크보다 상당히 더 복잡하게 만든다.

---

## 7.2.1 CDMA

6장에서 호스트들이 공유 매체를 통해 통신할 때, 여러 송신자가 보낸 신호가 수신자에서 간섭하지 않도록 프로토콜이 필요하다는 것을 상기해 보자. 6장에서 채널 분할, 랜덤 접속, 순번 방식의 세 가지 매체 접속 프로토콜 클래스를 설명했다. **코드 분할 다중 접속(Code Division Multiple Access, CDMA)**은 채널 분할 프로토콜 계열에 속한다. CDMA는 무선 LAN과 셀룰러 기술에서 널리 사용되므로, 이후 절에서 구체적인 무선 접속 기술을 다루기 전에 CDMA를 간략히 살펴본다.

### CDMA의 기본 원리

CDMA 프로토콜에서 전송되는 각 비트는 **칩핑률(chipping rate)**이라고 하는 훨씬 빠른 속도로 변화하는 신호(코드)를 비트에 곱하여 인코딩된다. 이는 원래 데이터 비트 시퀀스보다 훨씬 빠른 속도이다.

원래 데이터 비트가 CDMA 인코더에 도달하는 속도가 시간 단위를 정의한다고 가정하자. 즉, 전송될 각 원래 데이터 비트는 1비트 슬롯 시간이 필요하다. d_i를 i번째 비트 슬롯의 데이터 비트 값이라 하자. 편의상 데이터 비트 0을 값 -1로 표현한다. 각 비트 슬롯은 M개의 미니 슬롯으로 더 세분화된다. 송신자가 사용하는 CDMA 코드는 각각 +1 또는 -1 값을 갖는 M개의 값 c_m (m = 1, ..., M)의 시퀀스로 구성된다.

i번째 데이터 비트 d_i에 대해 d_i의 비트 전송 시간의 m번째 미니 슬롯 동안 CDMA 인코더의 출력 Z_i,m은 d_i와 할당된 CDMA 코드의 m번째 비트 c_m을 곱한 값이다:

**Z_i,m = d_i · c_m**

간섭하는 송신자가 없는 단순한 세계에서 수신기는 인코딩된 비트 Z_i,m을 수신하고, 다음 계산을 통해 원래 데이터 비트 d_i를 복구한다:

**d_i = (1/M) Σ(m=1 to M) Z_i,m · c_m**

### 간섭이 있는 환경에서의 CDMA

그러나 현실 세계는 이상적이지 않으며, CDMA는 서로 다른 할당된 코드를 사용하여 데이터를 인코딩하고 전송하는 간섭 송신자가 있는 환경에서도 작동해야 한다. CDMA 수신기가 다른 송신자들이 전송하는 비트와 뒤엉킨 상태에서 송신자의 원래 데이터 비트를 어떻게 복구할 수 있을까?

CDMA는 간섭하는 전송 비트 신호가 **가산적(additive)**이라는 가정 하에 작동한다. 예를 들어, 세 명의 송신자가 1 값을 보내고 네 번째 송신자가 같은 미니 슬롯 동안 -1 값을 보내면, 그 미니 슬롯 동안 모든 수신기에서 수신되는 신호는 2가 된다(1 + 1 + 1 - 1 = 2이므로).

다중 송신자가 있는 경우, 송신자 s는 자신의 인코딩된 전송 Z_i,m^s를 정확히 단일 송신자 경우와 같은 방식으로 계산한다. 그러나 i번째 비트 슬롯의 m번째 미니 슬롯 동안 수신기에서 수신되는 값은 이제 그 미니 슬롯 동안 모든 N명의 송신자로부터 전송된 비트의 합이다:

**Z*_i,m = Σ(s=1 to N) Z_i,m^s**

놀랍게도, 송신자들의 코드가 신중하게 선택되면 각 수신기는 송신자의 코드를 사용하여 집계 신호에서 주어진 송신자가 보낸 데이터를 정확히 단일 송신자 경우와 같은 방식으로 복구할 수 있다:

**d_i = (1/M) Σ(m=1 to M) Z*_i,m · c_m**

### 칵테일 파티 비유

6장의 칵테일 파티 비유를 떠올려 보자. CDMA 프로토콜은 파티 참석자들이 여러 언어로 말하는 것과 유사하다. 이러한 상황에서 인간은 실제로 자신이 이해하는 언어의 대화에 집중하면서 나머지 대화를 걸러내는 데 상당히 능숙하다. 여기서 CDMA가 시간이나 주파수와 달리 코드 공간을 분할하는 분할 프로토콜이며, 각 노드에 코드 공간의 전용 조각을 할당한다는 것을 알 수 있다.

### 실제 CDMA의 과제

CDMA에 대한 이 논의는 필연적으로 간략하다. 실제로는 여러 어려운 문제를 해결해야 한다. 첫째, CDMA 수신기가 특정 송신자의 신호를 추출할 수 있으려면 CDMA 코드를 신중하게 선택해야 한다. 둘째, 우리의 논의는 다양한 송신자로부터 수신되는 신호 세기가 동일하다고 가정했지만, 현실에서는 이를 달성하기 어려울 수 있다. CDMA와 관련된 이러한 문제 및 기타 문제를 다루는 상당한 양의 문헌이 있다.
