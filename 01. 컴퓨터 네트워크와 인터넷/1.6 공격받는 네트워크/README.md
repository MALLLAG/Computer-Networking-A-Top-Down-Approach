# 1.6 공격받는 네트워크

인터넷은 이미 많은 기관에서 없어서는 안 될 핵심 인프라가 되었습니다. 다양한 크고 작은 기업, 대학, 정부기관 등은 네트워크 없이는 업무를 진행할 수 없습니다. <br>
많은 사람들도 인터넷을 통해 업무, 소셜 활동, 개인적인 일들을 처리합니다. 최근에는 수십억 개의 ‘사물’(웨어러블 기기, 가전제품 등)도 네트워크에 연결되고 있습니다. <br>
인터넷은 우리 삶에 많은 편리함을 가져다주었지만, 그 이면에는 어두운 면도 있습니다. 바로 ‘나쁜 놈들’이 인터넷을 통해 우리의 일상을 파괴하려 한다는 점입니다. <br>
이들은 우리가 연결한 컴퓨터를 공격하고, 우리가 만든 규칙을 어기거나, 우리가 일상적으로 사용하는 네트워크 서비스를 방해합니다.

네트워크 보안은 이러한 악당들이 컴퓨터 네트워크를 어떻게 공격하는지, 그리고 앞으로 컴퓨터 네트워크 전문가가 될 우리가 어떻게 이를 방어하고, 심지어는 면역이 되는 시스템을 설계할 수 있을지 연구하는 학문입니다. <br>
기존 공격은 매우 빈번하고 다양하며, 앞으로 더 파괴적인 새로운 공격이 등장할 수도 있습니다. 이런 위협에 대응하기 위해 네트워크 보안은 컴퓨터 네트워크 분야의 핵심 주제가 되었습니다.

---

## 나쁜 놈들은 인터넷을 통해 당신의 호스트에 악성코드를 심을 수 있다

우리가 기기를 인터넷에 연결하는 이유는 데이터를 주고받기 위해서입니다. 이 데이터에는 인스타그램 게시물, 구글 검색 결과, 스트리밍 음악·영상, 화상통화, 영화 등 다양한 재미있는 것들이 포함됩니다. <br>
하지만 안타깝게도, 이런 좋은 것들 외에도 인터넷에는 ‘악성코드(malware)’라는 나쁜 것들도 떠다닙니다. <br>
악성코드는 우리의 기기에 침투해 감염시킬 수 있습니다. 일단 감염되면, 파일 삭제, 스파이웨어 설치(개인정보, 신분증, 비밀번호, 키 입력 등 수집 후 공격자에게 전송) 등 다양한 악의적 행동을 할 수 있습니다. <br>
감염된 호스트는 다른 수천, 수만 대의 감염된 기기와 함께 ‘봇넷(botnet)’을 형성해 스팸 메일을 뿌리거나, 특정 대상을 향해 분산서비스거부(Distributed Denial-of-service, DDoS) 공격을 할 수도 있습니다.

현대의 많은 악성코드는 ‘자기 복제(self-replicating)’ 기능을 가지고 있습니다. 한 대의 호스트를 감염시키면, 그 호스트에서 네트워크를 통해 또 다른 감염 가능한 호스트를 찾아내 감염시키고, 이렇게 감염된 호스트가 다시 또 다른 기기를 감염시키는 식으로 전파 속도가 기하급수적으로 빨라집니다. <br>
악성코드는 전파 방식에 따라 바이러스(virus)와 웜(worm)으로 나눌 수 있습니다.

- **컴퓨터 바이러스(virus)**
    - 사용자가 어떤 행동을 해야만 감염이 일어납니다.
    - 대표적으로 이메일 첨부파일에 악성 실행파일이 들어 있는 경우, 사용자가 첨부파일을 열면 모르는 사이에 악성코드가 실행됩니다.
    - 이 이메일은 대개 자기 복제 기능이 있어, 실행되면 피해자의 모든 연락처로 같은 메일과 첨부파일을 보냅니다.
- **컴퓨터 웜(worm)**
    - 사용자가 별다른 행동을 하지 않아도 감염됩니다.
    - 예를 들어, 사용자가 취약점이 있는 네트워크 애플리케이션을 실행하면, 공격자가 그 취약점을 이용해 악성코드를 전송·실행시킬 수 있습니다.
    - 감염된 기기는 네트워크를 스캔하며 또 다른 취약한 기기를 찾아내고, 발견하면 자신을 복제해 전송합니다.

현대에는 악성코드가 거의 어디에나 존재하며, 이를 방어하는 데 드는 비용도 매우 큽니다.

---

## 나쁜 놈들은 서버와 네트워크 인프라를 공격할 수 있다

또 다른 주요 보안 문제는 ‘서비스 거부 공격(DoS, Denial-of-service attack)’입니다. <br>
이름에서 알 수 있듯이, DoS 공격은 합법적인 사용자를 이용해 네트워크, 호스트, 기타 인프라가 서비스를 제공하지 못하게 만듭니다. <br>
웹 서버, 이메일 서버, DNS 서버(2장에서 설명), 각종 기관의 네트워크 등이 모두 피해자가 될 수 있습니다. 인터넷에서는 매년 수천 건의 DoS 공격이 발생합니다.

대부분의 인터넷 DoS 공격은 다음 세 가지 유형 중 하나로 분류할 수 있습니다.

- **취약점 공격(Vulnerability attack)**: 공격자가 소수의 정교하게 설계된 메시지를 취약한 애플리케이션이나 운영체제에 전송해, 올바른 순서로 패킷이 도착하면 서비스가 중단되거나 시스템이 다운됩니다.
- **대역폭 홍수 공격(Bandwidth flooding)**: 대량의 패킷을 목표 호스트로 보내 네트워크 대역폭을 가득 채워 정상적인 패킷이 서버에 도달하지 못하게 만듭니다.
- **연결 홍수 공격(Connection flooding)**: 목표 호스트와 대량의 TCP 하프 오픈(half-open) 또는 전체 연결을 맺어, 시스템 자원을 고갈시켜 정상 연결을 거부하게 만듭니다.

<img width="730" height="435" alt="Image" src="https://github.com/user-attachments/assets/a7fb34e4-a855-465f-bc43-af75af624885" />

대역폭 홍수 공격을 좀 더 자세히 살펴봅시다. 만약 서버의 접근 속도가 R bps라면, 공격자는 최소한 R bps로 패킷을 보내야 효과적으로 공격할 수 있습니다. R 값이 크면 단일 공격자로는 충분한 트래픽을 만들기 어렵고, 모든 트래픽이 한 곳에서 오면 상위 라우터가 이를 탐지해 차단할 수 있습니다. <br>
하지만 **분산서비스거부(DDoS, Distributed DoS attack)** 에서는 여러 출발지에서 동시에 대량 트래픽을 보내 총합이 R에 도달하도록 만듭니다. 봇넷을 이용해 수천 대의 감염된 컴퓨터로 DDoS 공격을 하는 것이 매우 흔합니다. DDoS 공격은 단일 출발지의 DoS 공격보다 탐지와 방어가 훨씬 어렵습니다.

---

## 나쁜 놈들은 패킷을 훔쳐볼 수 있다


현대에는 많은 사용자가 무선 장치를 통해 네트워크에 접속한다. 예를 들어 태블릿으로 Wi-Fi에 연결하거나, 휴대폰으로 셀룰러 네트워크에 연결하는 경우가 있다. <br>
언제 어디서나 네트워크에 접속할 수 있다는 점은 굉장히 편리하고, 모바일 사용자를 위해 설계된 수많은 멋진 애플리케이션들을 탄생시켰다. <br>
그러나 동시에 이는 매우 심각한 보안 문제를 낳았다. 무선 송신기 근처에 수동 수신기를 배치하면, 그 수신기는 지나가는 모든 패킷의 사본을 가로챌 수 있다. <br>
이 패킷들에는 비밀번호, 신원 정보, 기업 기밀, 개인 메시지와 같은 민감한 정보가 포함될 수 있다. 이렇게 지나가는 패킷 사본을 모두 기록하는 수동 수신기를 **패킷 분석기(packet sniffer)** 라고 부른다.

패킷 분석기는 유선 환경에서도 배치될 수 있다. 브로드캐스트 패킷을 사용하는 유선 환경(예: 많은 이더넷 LAN)에서는 패킷 스니퍼가 LAN에 브로드캐스트된 모든 패킷을 획득할 수 있다. <br>
앞서 1.2절에서 언급했듯, 케이블 TV 네트워크는 브로드캐스트 기술을 사용하기 때문에 패킷 도청이 특히 쉽다. <br>
게다가 악의적인 사용자가 어떤 조직의 액세스 라우터나 인터넷 연결 회선에 접속하기만 해도, 거기에 분석기를 심어 해당 조직과 오가는 모든 패킷을 엿들을 수 있다. 이렇게 도청한 패킷은 나중에 오프라인 상태에서 분석되어 그 안에 담긴 민감한 정보를 추출할 수 있다. <br>
패킷 분석기는 **수동적**이다. 즉, 전송 경로에 패킷을 삽입하지 않기 때문에 매우 탐지하기 어렵다. 결국 우리는 패킷을 무선 전송 매체로 보낼 때, 누군가가 그것을 엿들을 수 있다는 사실을 받아들여야 한다.

---

## 나쁜 놈들은 신뢰할 만한 사람인 척할 수 있다

패킷을 위조하는 일은 생각보다 훨씬 쉽다. 우리는 아주 간단히 임의의 출발지 주소, 패킷 내용, 목적지 주소를 포함하는 패킷을 만들어내고, 그것을 네트워크로 보낼 수 있다. <br>
그러면 그 패킷은 실제로 올바른 경로를 통해 전송된다. 만약 무심한 수신 측(예: 인터넷 라우터)이 이런 조작된 패킷을 받으면, 거짓 출발지 주소를 쉽게 신뢰하고 패킷에 내장된 명령(예: 포워딩 테이블 변경)을 실행할 수 있다. <br>
이렇게 출발지 주소를 속인 패킷을 인터넷에 주입하는 기술을 IP 스푸핑(IP spoofing) 이라고 하며, 이는 다양한 네트워크 신원 위조 기술 중 하나다.

이 문제를 해결하기 위해서는 엔드포인트 인증(end-point authentication) 이 필요하다. <br>
이것은 특정 메시지가 정말로 우리가 믿는 출발지에서 온 것인지 확인할 수 있는 메커니즘이다.


